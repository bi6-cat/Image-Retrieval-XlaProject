<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Retrieval System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-images"></i>
                <span>Zett Image Retrieval</span>
            </div>
            <nav class="nav-links">
                <a href="#" class="nav-link active" data-tab="search">
                    <i class="fas fa-search"></i>
                    <span>T√¨m ki·∫øm</span>
                </a>
                <a href="#" class="nav-link" data-tab="history">
                    <i class="fas fa-history"></i>
                    <span>L·ªãch s·ª≠</span>
                </a>
                <a href="#" class="nav-link" data-tab="analytics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Th·ªëng k√™</span>
                </a>
            </nav>
            <div class="header-actions">
                <button class="upload-btn" id="uploadBtn">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>ƒê√≥ng g√≥p ·∫£nh</span>
                </button>
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text">ƒêang k·∫øt n·ªëi...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Search Tab -->
        <section id="searchTab" class="tab-content active">
            <!-- Search Section -->
            <div class="search-section">
                <div class="search-container">
                    <h1 class="search-title">T√¨m ki·∫øm h√¨nh ·∫£nh th√¥ng minh</h1>
                    <p class="search-subtitle">S·ª≠ d·ª•ng AI ƒë·ªÉ t√¨m ki·∫øm h√¨nh ·∫£nh b·∫±ng vƒÉn b·∫£n ho·∫∑c h√¨nh ·∫£nh m·∫´u</p>
                    
                    <!-- Model Selection -->
                    <div class="model-selector">
                        <label class="model-label">
                            <i class="fas fa-brain"></i>
                            Ch·ªçn Model AI:
                        </label>
                        <div class="model-options" id="modelOptions">
                            <!-- Models will be loaded dynamically -->
                        </div>
                    </div>

                    <!-- Search Type Toggle -->
                    <div class="search-type-toggle">
                        <button class="toggle-btn active" data-type="text">
                            <i class="fas fa-keyboard"></i>
                            T√¨m b·∫±ng vƒÉn b·∫£n
                        </button>
                        <button class="toggle-btn" data-type="image">
                            <i class="fas fa-image"></i>
                            T√¨m b·∫±ng h√¨nh ·∫£nh
                        </button>
                    </div>

                    <!-- Text Search Form -->
                    <form id="textSearchForm" class="search-form">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input 
                                type="text" 
                                id="searchQuery" 
                                class="search-input" 
                                placeholder="M√¥ t·∫£ h√¨nh ·∫£nh b·∫°n mu·ªën t√¨m b·∫±ng ti·∫øng Anh (VD: sleeping cat, running dog)"
                                autocomplete="off"
                            >
                            <button type="submit" class="search-btn">
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                        <div class="search-suggestions">
                            <span class="suggestion-label">G·ª£i √Ω:</span>
                            <button type="button" class="suggestion-chip" data-query="cute cat">üê± M√®o d·ªÖ th∆∞∆°ng</button>
                            <button type="button" class="suggestion-chip" data-query="dog running">üêï Ch√≥ ch·∫°y</button>
                            <button type="button" class="suggestion-chip" data-query="butterfly on flower">ü¶ã B∆∞·ªõm tr√™n hoa</button>
                            <button type="button" class="suggestion-chip" data-query="elephant in nature">üêò Voi trong t·ª± nhi√™n</button>
                            <button type="button" class="suggestion-chip" data-query="bird flying in sky">üê¶ Chim bay tr√™n tr·ªùi</button>
                            <button type="button" class="suggestion-chip" data-query="horse running in field">üê¥ Ng·ª±a ch·∫°y ƒë·ªìng c·ªè</button>
                            <button type="button" class="suggestion-chip" data-query="sheep grazing">üêë C·ª´u ƒÉn c·ªè</button>
                            <button type="button" class="suggestion-chip" data-query="cow in farm">üêÑ B√≤ ·ªü n√¥ng tr·∫°i</button>
                        </div>
                    </form>

                    <!-- Image Search Form -->
                    <form id="imageSearchForm" class="search-form hidden">
                        <div class="image-upload-zone" id="imageUploadZone">
                            <input type="file" id="imageInput" accept="image/*" class="file-input">
                            <div class="upload-content">
                                <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                <p class="upload-text">K√©o th·∫£ h√¨nh ·∫£nh v√†o ƒë√¢y</p>
                                <p class="upload-subtext">ho·∫∑c click ƒë·ªÉ ch·ªçn file</p>
                            </div>
                            <div class="image-preview hidden" id="imagePreview">
                                <img id="previewImg" src="" alt="Preview">
                                <button type="button" class="remove-image-btn" id="removeImageBtn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <button type="submit" class="search-btn-full" id="imageSearchBtn" disabled>
                            <i class="fas fa-search"></i>
                            T√¨m ki·∫øm h√¨nh ·∫£nh t∆∞∆°ng t·ª±
                        </button>
                    </form>

                    <!-- Advanced Options -->
                    <div class="advanced-options">
                        <button type="button" class="advanced-toggle" id="advancedToggle">
                            <i class="fas fa-sliders-h"></i>
                            T√πy ch·ªçn n√¢ng cao
                            <i class="fas fa-chevron-down toggle-arrow"></i>
                        </button>
                        <div class="advanced-panel hidden" id="advancedPanel">
                            <div class="option-group">
                                <label>S·ªë k·∫øt qu·∫£ hi·ªÉn th·ªã</label>
                                <input type="range" id="topKSlider" min="5" max="50" value="20" class="slider">
                                <span id="topKValue">20</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section hidden" id="resultsSection">
                <div class="results-header">
                    <h2 class="results-title">
                        <i class="fas fa-images"></i>
                        K·∫øt qu·∫£ t√¨m ki·∫øm
                        <span class="results-count" id="resultsCount">(0)</span>
                    </h2>
                    <div class="results-actions">
                        <button class="action-btn" id="clearFeedbackBtn" title="X√≥a ph·∫£n h·ªìi">
                            <i class="fas fa-eraser"></i>
                            X√≥a ch·ªçn
                        </button>
                        <button class="action-btn primary" id="submitFeedbackBtn" disabled title="G·ª≠i ph·∫£n h·ªìi ƒë·ªÉ tinh ch·ªânh k·∫øt qu·∫£">
                            <i class="fas fa-magic"></i>
                            Tinh ch·ªânh k·∫øt qu·∫£
                        </button>
                    </div>
                </div>

                <!-- Feedback Panel -->
                <div class="feedback-panel" id="feedbackPanel">
                    <div class="feedback-info">
                        <div class="feedback-stat liked">
                            <i class="fas fa-heart"></i>
                            <span id="likedCount">0</span> ·∫£nh th√≠ch
                        </div>
                        <div class="feedback-stat disliked">
                            <i class="fas fa-heart-broken"></i>
                            <span id="dislikedCount">0</span> ·∫£nh kh√¥ng th√≠ch
                        </div>
                    </div>
                    <div class="feedback-text-input">
                        <input 
                            type="text" 
                            id="feedbackText" 
                            placeholder="Th√™m m√¥ t·∫£ ƒë·ªÉ tinh ch·ªânh (VD: I want to see more white cats)"
                            class="feedback-input"
                        >
                    </div>
                </div>

                <!-- Results Grid -->
                <div class="results-grid" id="resultsGrid">
                    <!-- Results will be loaded dynamically -->
                </div>

                <!-- Loading State -->
                <div class="loading-state hidden" id="loadingState">
                    <div class="loader"></div>
                    <p>ƒêang t√¨m ki·∫øm...</p>
                </div>

                <!-- Empty State -->
                <div class="empty-state hidden" id="emptyState">
                    <i class="fas fa-search"></i>
                    <h3>Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</h3>
                    <p>Th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c</p>
                </div>
            </div>
        </section>

        <!-- History Tab -->
        <section id="historyTab" class="tab-content">
            <div class="history-section">
                <div class="section-header">
                    <h2><i class="fas fa-history"></i> L·ªãch s·ª≠ t√¨m ki·∫øm</h2>
                    <button class="action-btn" id="refreshHistoryBtn">
                        <i class="fas fa-sync-alt"></i>
                        L√†m m·ªõi
                    </button>
                </div>
                <div class="history-list" id="historyList">
                    <!-- History items will be loaded dynamically -->
                </div>
            </div>
        </section>

        <!-- Analytics Tab -->
        <section id="analyticsTab" class="tab-content">
            <div class="analytics-section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Th·ªëng k√™ h·ªá th·ªëng</h2>
                    <button class="action-btn" id="refreshAnalyticsBtn">
                        <i class="fas fa-sync-alt"></i>
                        L√†m m·ªõi
                    </button>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-icon blue">
                            <i class="fas fa-images"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalImages">0</span>
                            <span class="stat-label">T·ªïng s·ªë ·∫£nh</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalSearches">0</span>
                            <span class="stat-label">L∆∞·ª£t t√¨m ki·∫øm</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalUsers">0</span>
                            <span class="stat-label">Ng∆∞·ªùi d√πng</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalModels">0</span>
                            <span class="stat-label">Model AI</span>
                        </div>
                    </div>
                </div>

                <!-- Model Stats -->
                <div class="analytics-card">
                    <h3><i class="fas fa-database"></i> Th·ªëng k√™ theo Model</h3>
                    <div class="model-stats" id="modelStats">
                        <!-- Model stats will be loaded dynamically -->
                    </div>
                </div>

                <!-- Search Types Chart -->
                <div class="analytics-row">
                    <div class="analytics-card">
                        <h3><i class="fas fa-chart-pie"></i> Lo·∫°i t√¨m ki·∫øm</h3>
                        <div class="chart-container">
                            <div class="donut-chart" id="searchTypesChart">
                                <div class="donut-segment text-segment"></div>
                                <div class="donut-hole">
                                    <span id="textSearchPercent">0%</span>
                                    <small>VƒÉn b·∫£n</small>
                                </div>
                            </div>
                            <div class="chart-legend">
                                <div class="legend-item">
                                    <span class="legend-color text"></span>
                                    <span>T√¨m b·∫±ng vƒÉn b·∫£n: <strong id="textSearchCount">0</strong></span>
                                </div>
                                <div class="legend-item">
                                    <span class="legend-color image"></span>
                                    <span>T√¨m b·∫±ng h√¨nh ·∫£nh: <strong id="imageSearchCount">0</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3><i class="fas fa-fire"></i> T·ª´ kh√≥a ph·ªï bi·∫øn</h3>
                        <div class="top-queries" id="topQueries">
                            <!-- Top queries will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Image Modal -->
    <div class="modal hidden" id="imageModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-image-container">
                <img id="modalImage" src="" alt="Full size image">
            </div>
            <div class="modal-info">
                <p class="modal-caption" id="modalCaption"></p>
                <div class="modal-meta">
                    <span class="modal-score"><i class="fas fa-star"></i> Score: <span id="modalScore"></span></span>
                    <span class="modal-species"><i class="fas fa-paw"></i> <span id="modalSpecies"></span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div class="modal hidden" id="uploadModal">
        <div class="modal-overlay"></div>
        <div class="modal-content upload-modal-content">
            <button class="modal-close" id="uploadModalClose">
                <i class="fas fa-times"></i>
            </button>
            <h2><i class="fas fa-cloud-upload-alt"></i> ƒê√≥ng g√≥p h√¨nh ·∫£nh</h2>
            <form id="uploadForm" class="upload-form">
                <div class="upload-preview-zone" id="uploadPreviewZone">
                    <input type="file" id="uploadFileInput" accept="image/*" required>
                    <div class="upload-preview-content">
                        <i class="fas fa-image upload-preview-icon"></i>
                        <p>Click ho·∫∑c k√©o th·∫£ ·∫£nh v√†o ƒë√¢y</p>
                        <img id="uploadPreview" class="upload-preview-img hidden" src="" alt="Preview">
                    </div>
                </div>
                <div class="form-group">
                    <label for="uploadCaption"><i class="fas fa-comment"></i> M√¥ t·∫£ (kh√¥ng b·∫Øt bu·ªôc)</label>
                    <input type="text" id="uploadCaption" placeholder="VD: A cute cat sleeping on a sofa">
                </div>
                <div class="form-group">
                    <label for="uploadSpecies"><i class="fas fa-paw"></i> Lo√†i (kh√¥ng b·∫Øt bu·ªôc)</label>
                    <input type="text" id="uploadSpecies" placeholder="VD: cat, dog, bird...">
                </div>
                <button type="submit" class="submit-upload-btn">
                    <i class="fas fa-check"></i> T·∫£i l√™n
                </button>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="app.js"></script>
</body>
</html>
