<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animal Image Retrieval</title>
  <link rel="stylesheet" href="styles_improved.css">
</head>
<body>
  <h1>ğŸ¾ Animal Image Retrieval System</h1>
  <p class="subtitle">Interactive search with relevance feedback</p>

  <!-- Stats Bar -->
  <div id="statsBar" class="stats-bar">
    <span></span>
    <div style="display: flex; gap: 10px;">
      <a href="advanced_search.html" class="analytics-link">ğŸ” Advanced Search</a>
      <a href="analytics.html" class="analytics-link">ğŸ“Š Analytics</a>
    </div>
  </div>

  <div class="search-container">
    <div class="search-tabs">
      <button class="tab-btn active" onclick="switchTab('text')">ğŸ”¤ Text Search</button>
      <button class="tab-btn" onclick="switchTab('image')">ğŸ“¸ Image Search</button>
    </div>

    <div id="textSearch" class="search-panel active">
      <input id="queryInput" type="text" placeholder="Type your query (e.g., black cat sleeping)" />
      <button id="searchBtn" class="btn-primary">ğŸ” Search</button>
      <label style="margin-left: 15px; display: inline-flex; align-items: center; gap: 8px; cursor: pointer;">
        <input type="checkbox" id="autoFilterSpecies" checked style="cursor: pointer;">
        <span style="color: #666; font-size: 0.9rem;">Auto-filter by species (cat, dog, etc.)</span>
      </label>
    </div>

    <div id="imageSearch" class="search-panel">
      <input id="imageUpload" type="file" accept="image/*" style="display:none" />
      <button onclick="document.getElementById('imageUpload').click()" class="btn-primary">
        ğŸ“¤ Upload Image
      </button>
      <span id="fileName" class="file-name"></span>
      <button id="searchByImageBtn" class="btn-secondary" style="display:none">ğŸ” Search Similar</button>
    </div>
  </div>

  <div id="loading" class="loading" style="display:none">
    <div class="spinner"></div>
    <p>Searching...</p>
  </div>

  <div id="resultsInfo" class="results-info"></div>
  <div id="results" class="results-grid"></div>

  <div class="feedback-container">
    <h3>ğŸ’¡ Refine Your Search</h3>
    <p class="hint">
      <strong>How it works:</strong><br>
      1ï¸âƒ£ Mark images: ğŸ‘ Relevant (want more like this) or ğŸ‘ Not Relevant (want less like this)<br>
      2ï¸âƒ£ Optionally describe what you want more specifically<br>
      3ï¸âƒ£ Click Refine to get better results!
    </p>
    <textarea id="feedbackText" placeholder="e.g., 'I want more fluffy cats with green eyes in natural lighting'"></textarea>
    <button id="feedbackBtn" class="btn-feedback">âœ¨ Refine Search</button>
    <div id="feedbackStats" class="feedback-stats"></div>
  </div>

  <!-- Search History -->
  <div class="history-container">
    <h3>ğŸ“œ Your Recent Searches</h3>
    <button id="toggleHistory" class="btn-secondary" onclick="toggleHistory()">Show History</button>
    <div id="historyList" class="history-list" style="display:none"></div>
  </div>

  <script src="script.js"></script>
</body>
</html>
